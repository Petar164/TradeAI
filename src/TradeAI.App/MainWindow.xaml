<Window x:Class="TradeAI.App.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:shell="clr-namespace:System.Windows.Shell;assembly=PresentationFramework"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:ui="clr-namespace:TradeAI.UI.Views;assembly=TradeAI.UI"
        mc:Ignorable="d"
        Title="TradeAI"
        MinHeight="600" MinWidth="1000"
        WindowStyle="None"
        ResizeMode="CanResize"
        Background="{StaticResource BrushBackground}">

    <!-- Custom window chrome: top 48px is drag region; resize border 5px all sides -->
    <shell:WindowChrome.WindowChrome>
        <shell:WindowChrome CaptionHeight="48"
                            ResizeBorderThickness="5,5,5,5"
                            CornerRadius="0"
                            GlassFrameThickness="0"/>
    </shell:WindowChrome.WindowChrome>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="48"/>    <!-- Header / chrome -->
            <RowDefinition Height="*"/>     <!-- Main content -->
        </Grid.RowDefinitions>

        <!-- ═══════════════════════════════════════════════════════ -->
        <!-- HEADER BAR                                              -->
        <!-- ═══════════════════════════════════════════════════════ -->
        <Border Grid.Row="0"
                Background="{StaticResource BrushSurface}"
                BorderBrush="{StaticResource BrushBorder}"
                BorderThickness="0,0,0,1">

            <!-- Accent gradient line at top -->
            <Grid>
                <Border Height="2" VerticalAlignment="Top" Background="{StaticResource BrushHeaderAccent}"/>

                <Grid Margin="0,2,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>   <!-- Logo -->
                        <ColumnDefinition Width="Auto"/>   <!-- Active symbol chip -->
                        <ColumnDefinition Width="*"/>      <!-- Spacer -->
                        <ColumnDefinition Width="Auto"/>   <!-- Live indicator -->
                        <ColumnDefinition Width="Auto"/>   <!-- Chrome buttons -->
                    </Grid.ColumnDefinitions>

                    <!-- Logo -->
                    <StackPanel Grid.Column="0" Orientation="Horizontal"
                                VerticalAlignment="Center" Margin="16,0,0,0">
                        <Border Width="7" Height="7" CornerRadius="3.5"
                                Background="{StaticResource BrushAccent}"
                                Margin="0,0,8,0"/>
                        <TextBlock Text="TRADE"
                                   FontSize="14" FontWeight="Bold"
                                   Foreground="{StaticResource BrushTextPrimary}"
                                   VerticalAlignment="Center"/>
                        <TextBlock Text="AI"
                                   FontSize="14" FontWeight="Bold"
                                   Foreground="{StaticResource BrushAccent}"
                                   VerticalAlignment="Center"/>
                    </StackPanel>

                    <!-- Active symbol chip -->
                    <Border Grid.Column="1"
                            CornerRadius="4"
                            Background="{StaticResource BrushSurfaceElevated}"
                            BorderBrush="{StaticResource BrushBorder}"
                            BorderThickness="1"
                            Padding="10,4"
                            Margin="16,0,0,0"
                            VerticalAlignment="Center">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock x:Name="ActiveSymbolLabel"
                                       Text="AAPL"
                                       FontSize="13" FontWeight="SemiBold"
                                       Foreground="{StaticResource BrushTextPrimary}"
                                       VerticalAlignment="Center"/>
                            <TextBlock x:Name="ActivePriceLabel"
                                       Text=" · 186.40"
                                       FontSize="12"
                                       Foreground="{StaticResource BrushTextMuted}"
                                       VerticalAlignment="Center"/>
                            <TextBlock x:Name="ActiveChangeLabel"
                                       Text=" +1.24%"
                                       FontSize="11"
                                       Foreground="{StaticResource BrushSuccess}"
                                       VerticalAlignment="Center"
                                       Margin="2,0,0,0"/>
                        </StackPanel>
                    </Border>

                    <!-- Live indicator pill -->
                    <Border Grid.Column="3"
                            CornerRadius="10"
                            Background="{StaticResource BrushSuccessDim}"
                            BorderBrush="{StaticResource BrushSuccess}"
                            BorderThickness="1"
                            Padding="9,4"
                            VerticalAlignment="Center"
                            Margin="0,0,8,0"
                            shell:WindowChrome.IsHitTestVisibleInChrome="True">
                        <StackPanel Orientation="Horizontal">
                            <Ellipse Width="6" Height="6"
                                     Fill="{StaticResource BrushSuccess}"
                                     VerticalAlignment="Center"/>
                            <TextBlock Text="LIVE"
                                       FontSize="10" FontWeight="SemiBold"
                                       Foreground="{StaticResource BrushSuccess}"
                                       Margin="5,0,0,0"
                                       VerticalAlignment="Center"/>
                        </StackPanel>
                    </Border>

                    <!-- Window chrome buttons: minimize / maximize / close -->
                    <StackPanel Grid.Column="4" Orientation="Horizontal">
                        <Button x:Name="BtnMinimize"
                                Content="&#x2014;"
                                Style="{StaticResource ChromeButtonStyle}"
                                Click="BtnMinimize_Click"
                                shell:WindowChrome.IsHitTestVisibleInChrome="True"
                                ToolTip="Minimize"/>
                        <Button x:Name="BtnMaximize"
                                Content="&#x2610;"
                                Style="{StaticResource ChromeButtonStyle}"
                                Click="BtnMaximize_Click"
                                shell:WindowChrome.IsHitTestVisibleInChrome="True"
                                ToolTip="Maximize"/>
                        <Button x:Name="BtnClose"
                                Content="&#x2715;"
                                Style="{StaticResource ChromeCloseButtonStyle}"
                                Click="BtnClose_Click"
                                shell:WindowChrome.IsHitTestVisibleInChrome="True"
                                ToolTip="Close"/>
                    </StackPanel>
                </Grid>
            </Grid>
        </Border>

        <!-- ═══════════════════════════════════════════════════════ -->
        <!-- MAIN 3-COLUMN LAYOUT                                    -->
        <!-- ═══════════════════════════════════════════════════════ -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="240" MinWidth="180" MaxWidth="320"/>
                <ColumnDefinition Width="4"/>
                <ColumnDefinition Width="*" MinWidth="500"/>
                <ColumnDefinition Width="4"/>
                <ColumnDefinition Width="300" MinWidth="240" MaxWidth="400"/>
            </Grid.ColumnDefinitions>

            <!-- ─── LEFT: Watchlist ─── -->
            <Border Grid.Column="0"
                    Background="{StaticResource BrushSurface}"
                    BorderBrush="{StaticResource BrushBorder}"
                    BorderThickness="0,0,1,0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Panel header -->
                    <Border Grid.Row="0"
                            BorderBrush="{StaticResource BrushBorderSubtle}"
                            BorderThickness="0,0,0,1"
                            Padding="16,0">
                        <Grid Height="38">
                            <TextBlock Text="WATCHLIST"
                                       Style="{StaticResource PanelHeaderStyle}"
                                       Margin="0"
                                       VerticalAlignment="Center"/>
                            <Border HorizontalAlignment="Right"
                                    VerticalAlignment="Center"
                                    Background="{StaticResource BrushSurfaceElevated}"
                                    CornerRadius="8"
                                    Padding="7,2">
                                <TextBlock x:Name="WatchlistCountLabel"
                                           Text="5"
                                           FontSize="10" FontWeight="SemiBold"
                                           Foreground="{StaticResource BrushTextMuted}"/>
                            </Border>
                        </Grid>
                    </Border>

                    <!-- Symbol rows -->
                    <ScrollViewer Grid.Row="1"
                                  VerticalScrollBarVisibility="Auto"
                                  HorizontalScrollBarVisibility="Disabled">
                        <StackPanel x:Name="WatchlistPanel">

                            <!-- AAPL — signal active (blue dot) -->
                            <Border Style="{StaticResource WatchlistRowStyle}">
                                <Grid Margin="14,0,14,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="14"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Ellipse Grid.Column="0" Width="6" Height="6"
                                             Fill="{StaticResource BrushAccent}"
                                             VerticalAlignment="Center"/>
                                    <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="8,0,0,0">
                                        <TextBlock Text="AAPL"
                                                   FontSize="13" FontWeight="SemiBold"
                                                   Foreground="{StaticResource BrushTextPrimary}"/>
                                        <TextBlock Text="NASDAQ"
                                                   FontSize="10"
                                                   Foreground="{StaticResource BrushTextMuted}"/>
                                    </StackPanel>
                                    <StackPanel Grid.Column="2" VerticalAlignment="Center"
                                                HorizontalAlignment="Right">
                                        <TextBlock Text="186.40"
                                                   FontSize="12" FontWeight="Medium"
                                                   HorizontalAlignment="Right"/>
                                        <TextBlock Text="+1.24%"
                                                   FontSize="10"
                                                   Foreground="{StaticResource BrushSuccess}"
                                                   HorizontalAlignment="Right"/>
                                    </StackPanel>
                                </Grid>
                            </Border>

                            <!-- MSFT — signal active (purple) -->
                            <Border Style="{StaticResource WatchlistRowStyle}">
                                <Grid Margin="14,0,14,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="14"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Ellipse Grid.Column="0" Width="6" Height="6"
                                             Fill="{StaticResource BrushInfo}"
                                             VerticalAlignment="Center"/>
                                    <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="8,0,0,0">
                                        <TextBlock Text="MSFT"
                                                   FontSize="13" FontWeight="SemiBold"/>
                                        <TextBlock Text="NASDAQ"
                                                   FontSize="10"
                                                   Foreground="{StaticResource BrushTextMuted}"/>
                                    </StackPanel>
                                    <StackPanel Grid.Column="2" VerticalAlignment="Center"
                                                HorizontalAlignment="Right">
                                        <TextBlock Text="415.23"
                                                   FontSize="12" FontWeight="Medium"
                                                   HorizontalAlignment="Right"/>
                                        <TextBlock Text="+0.82%"
                                                   FontSize="10"
                                                   Foreground="{StaticResource BrushSuccess}"
                                                   HorizontalAlignment="Right"/>
                                    </StackPanel>
                                </Grid>
                            </Border>

                            <!-- TSLA — no signal (grey dot) -->
                            <Border Style="{StaticResource WatchlistRowStyle}">
                                <Grid Margin="14,0,14,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="14"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Ellipse Grid.Column="0" Width="5" Height="5"
                                             Fill="{StaticResource BrushBorder}"
                                             VerticalAlignment="Center"/>
                                    <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="8,0,0,0">
                                        <TextBlock Text="TSLA"
                                                   FontSize="13" FontWeight="SemiBold"/>
                                        <TextBlock Text="NASDAQ"
                                                   FontSize="10"
                                                   Foreground="{StaticResource BrushTextMuted}"/>
                                    </StackPanel>
                                    <StackPanel Grid.Column="2" VerticalAlignment="Center"
                                                HorizontalAlignment="Right">
                                        <TextBlock Text="248.43"
                                                   FontSize="12" FontWeight="Medium"
                                                   HorizontalAlignment="Right"/>
                                        <TextBlock Text="-2.14%"
                                                   FontSize="10"
                                                   Foreground="{StaticResource BrushDanger}"
                                                   HorizontalAlignment="Right"/>
                                    </StackPanel>
                                </Grid>
                            </Border>

                            <!-- EUR/USD — no signal -->
                            <Border Style="{StaticResource WatchlistRowStyle}">
                                <Grid Margin="14,0,14,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="14"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Ellipse Grid.Column="0" Width="5" Height="5"
                                             Fill="{StaticResource BrushBorder}"
                                             VerticalAlignment="Center"/>
                                    <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="8,0,0,0">
                                        <TextBlock Text="EUR/USD"
                                                   FontSize="13" FontWeight="SemiBold"/>
                                        <TextBlock Text="FOREX"
                                                   FontSize="10"
                                                   Foreground="{StaticResource BrushTextMuted}"/>
                                    </StackPanel>
                                    <StackPanel Grid.Column="2" VerticalAlignment="Center"
                                                HorizontalAlignment="Right">
                                        <TextBlock Text="1.0842"
                                                   FontSize="12" FontWeight="Medium"
                                                   HorizontalAlignment="Right"/>
                                        <TextBlock Text="-0.08%"
                                                   FontSize="10"
                                                   Foreground="{StaticResource BrushDanger}"
                                                   HorizontalAlignment="Right"/>
                                    </StackPanel>
                                </Grid>
                            </Border>

                            <!-- GBP/USD — no signal -->
                            <Border Style="{StaticResource WatchlistRowStyle}">
                                <Grid Margin="14,0,14,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="14"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Ellipse Grid.Column="0" Width="5" Height="5"
                                             Fill="{StaticResource BrushBorder}"
                                             VerticalAlignment="Center"/>
                                    <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="8,0,0,0">
                                        <TextBlock Text="GBP/USD"
                                                   FontSize="13" FontWeight="SemiBold"/>
                                        <TextBlock Text="FOREX"
                                                   FontSize="10"
                                                   Foreground="{StaticResource BrushTextMuted}"/>
                                    </StackPanel>
                                    <StackPanel Grid.Column="2" VerticalAlignment="Center"
                                                HorizontalAlignment="Right">
                                        <TextBlock Text="1.2634"
                                                   FontSize="12" FontWeight="Medium"
                                                   HorizontalAlignment="Right"/>
                                        <TextBlock Text="+0.21%"
                                                   FontSize="10"
                                                   Foreground="{StaticResource BrushSuccess}"
                                                   HorizontalAlignment="Right"/>
                                    </StackPanel>
                                </Grid>
                            </Border>

                        </StackPanel>
                    </ScrollViewer>

                    <!-- Add symbol footer -->
                    <Border Grid.Row="2"
                            BorderBrush="{StaticResource BrushBorder}"
                            BorderThickness="0,1,0,0"
                            Padding="16,10">
                        <Button x:Name="AddSymbolButton"
                                Background="Transparent"
                                BorderThickness="0"
                                Cursor="Hand"
                                HorizontalAlignment="Left"
                                shell:WindowChrome.IsHitTestVisibleInChrome="False">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="+"
                                           FontSize="14"
                                           Foreground="{StaticResource BrushAccent}"
                                           Margin="0,0,6,0"
                                           VerticalAlignment="Center"/>
                                <TextBlock Text="Add Symbol"
                                           FontSize="12"
                                           Foreground="{StaticResource BrushTextMuted}"
                                           VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                    </Border>
                </Grid>
            </Border>

            <!-- ─── SPLITTER ─── -->
            <GridSplitter Grid.Column="1"
                          Width="4"
                          HorizontalAlignment="Stretch"
                          Background="{StaticResource BrushBorder}"
                          ResizeBehavior="PreviousAndNext"
                          Cursor="SizeWE"/>

            <!-- ─── CENTER: Chart ─── -->
            <Grid Grid.Column="2" Background="{StaticResource BrushBackground}">
                <Grid.RowDefinitions>
                    <RowDefinition Height="38"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Timeframe selector bar -->
                <Border Grid.Row="0"
                        Background="{StaticResource BrushSurface}"
                        BorderBrush="{StaticResource BrushBorder}"
                        BorderThickness="0,0,0,1">
                    <StackPanel x:Name="TfButtonPanel"
                                Orientation="Horizontal"
                                VerticalAlignment="Center"
                                Margin="12,0">
                        <Button Content="1m"  Tag="1m"  Style="{StaticResource TimeframeButtonStyle}" Margin="0,0,1,0" Click="TfButton_Click"/>
                        <Button Content="3m"  Tag="3m"  Style="{StaticResource TimeframeButtonStyle}" Margin="0,0,1,0" Click="TfButton_Click"/>
                        <Button Content="5m"  Tag="5m"  Style="{StaticResource TimeframeButtonStyle}" Margin="0,0,1,0" Click="TfButton_Click"/>
                        <Button Content="15m" Tag="15m" Style="{StaticResource TimeframeButtonStyle}" Margin="0,0,1,0" Click="TfButton_Click"/>
                        <Button Content="30m" Tag="30m" Style="{StaticResource TimeframeButtonStyle}" Margin="0,0,1,0" Click="TfButton_Click"/>
                        <Rectangle Width="1" Height="14" Fill="{StaticResource BrushBorder}" Margin="6,0"/>
                        <Button Content="1h"  Tag="1h"  Style="{StaticResource TimeframeButtonStyle}" Margin="0,0,1,0" Click="TfButton_Click"/>
                        <Button Content="4h"  Tag="4h"  Style="{StaticResource TimeframeButtonStyle}" Margin="0,0,1,0" Click="TfButton_Click"/>
                        <Button Content="1D"  Tag="1d"  Style="{StaticResource TimeframeButtonStyle}" Click="TfButton_Click"/>
                    </StackPanel>
                </Border>

                <!-- Chart: TradingView Lightweight Charts inside WebView2 -->
                <ui:ChartView x:Name="ChartPanel" Grid.Row="1"/>
            </Grid>

            <!-- ─── SPLITTER ─── -->
            <GridSplitter Grid.Column="3"
                          Width="4"
                          HorizontalAlignment="Stretch"
                          Background="{StaticResource BrushBorder}"
                          ResizeBehavior="PreviousAndNext"
                          Cursor="SizeWE"/>

            <!-- ─── RIGHT: Signal Panel ─── -->
            <Border Grid.Column="4"
                    Background="{StaticResource BrushSurface}"
                    BorderBrush="{StaticResource BrushBorder}"
                    BorderThickness="1,0,0,0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Panel header -->
                    <Border Grid.Row="0"
                            BorderBrush="{StaticResource BrushBorderSubtle}"
                            BorderThickness="0,0,0,1"
                            Padding="16,0">
                        <Grid Height="38">
                            <TextBlock Text="SIGNALS"
                                       Style="{StaticResource PanelHeaderStyle}"
                                       Margin="0"
                                       VerticalAlignment="Center"/>
                            <Border HorizontalAlignment="Right"
                                    VerticalAlignment="Center"
                                    Background="{StaticResource BrushAccentDim}"
                                    CornerRadius="8"
                                    Padding="7,2">
                                <TextBlock Text="0"
                                           FontSize="10" FontWeight="SemiBold"
                                           Foreground="{StaticResource BrushAccent}"/>
                            </Border>
                        </Grid>
                    </Border>

                    <!-- Signal cards / empty state -->
                    <ScrollViewer Grid.Row="1"
                                  VerticalScrollBarVisibility="Auto"
                                  HorizontalScrollBarVisibility="Disabled">
                        <StackPanel x:Name="SignalCards">
                            <!-- Empty state -->
                            <StackPanel HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        Margin="24,48,24,0">
                                <!-- Radar graphic -->
                                <Grid Width="64" Height="64"
                                      HorizontalAlignment="Center"
                                      Margin="0,0,0,16">
                                    <Ellipse Width="64" Height="64"
                                             Stroke="{StaticResource BrushBorder}"
                                             StrokeThickness="1"
                                             Fill="Transparent"/>
                                    <Ellipse Width="42" Height="42"
                                             Stroke="{StaticResource BrushBorder}"
                                             StrokeThickness="1"
                                             Fill="Transparent"/>
                                    <Ellipse Width="20" Height="20"
                                             Stroke="{StaticResource BrushBorder}"
                                             StrokeThickness="1"
                                             Fill="Transparent"/>
                                    <Line X1="32" Y1="0" X2="32" Y2="64"
                                          Stroke="{StaticResource BrushBorderSubtle}"
                                          StrokeThickness="0.5"/>
                                    <Line X1="0" Y1="32" X2="64" Y2="32"
                                          Stroke="{StaticResource BrushBorderSubtle}"
                                          StrokeThickness="0.5"/>
                                    <Ellipse Width="6" Height="6"
                                             Fill="{StaticResource BrushAccent}"
                                             HorizontalAlignment="Center"
                                             VerticalAlignment="Center"
                                             Opacity="0.8"/>
                                </Grid>

                                <TextBlock Text="Scanning for setups"
                                           FontSize="13" FontWeight="Medium"
                                           Foreground="{StaticResource BrushTextMuted}"
                                           HorizontalAlignment="Center"/>
                                <TextBlock Text="Signals appear here when&#x0a;patterns are detected"
                                           FontSize="11"
                                           Foreground="{StaticResource BrushTextSubtle}"
                                           HorizontalAlignment="Center"
                                           TextAlignment="Center"
                                           Margin="0,6,0,0"
                                           LineHeight="18"/>
                            </StackPanel>
                        </StackPanel>
                    </ScrollViewer>

                    <!-- Chat override bar -->
                    <Border Grid.Row="2"
                            BorderBrush="{StaticResource BrushBorder}"
                            BorderThickness="0,1,0,0"
                            Padding="10,8">
                        <StackPanel>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <!-- TextBox with placeholder overlay -->
                                <Grid Grid.Column="0">
                                    <TextBox x:Name="ChatInput"
                                             Height="32"
                                             VerticalContentAlignment="Center"
                                             KeyDown="ChatInput_KeyDown"
                                             shell:WindowChrome.IsHitTestVisibleInChrome="True"/>
                                    <TextBlock Text="e.g. too risky, widen stops..."
                                               IsHitTestVisible="False"
                                               FontSize="11"
                                               Foreground="{StaticResource BrushTextSubtle}"
                                               VerticalAlignment="Center"
                                               Padding="11,0,0,0">
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="Visibility" Value="Collapsed"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding Text, ElementName=ChatInput}" Value="">
                                                        <Setter Property="Visibility" Value="Visible"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>
                                </Grid>

                                <Button Grid.Column="1"
                                        x:Name="ChatSendButton"
                                        Width="32" Height="32"
                                        Margin="6,0,0,0"
                                        Background="{StaticResource BrushAccent}"
                                        Foreground="White"
                                        BorderThickness="0"
                                        FontSize="14"
                                        Cursor="Hand"
                                        Content="&#x2192;"
                                        Click="ChatSendButton_Click"
                                        shell:WindowChrome.IsHitTestVisibleInChrome="True">
                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <Border x:Name="Bd"
                                                    Background="{TemplateBinding Background}"
                                                    CornerRadius="4">
                                                <ContentPresenter HorizontalAlignment="Center"
                                                                  VerticalAlignment="Center"/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter TargetName="Bd" Property="Background"
                                                            Value="{StaticResource BrushAccentHover}"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                            </Grid>

                            <!-- Confirmation / error response from RiskProfileService -->
                            <TextBlock x:Name="ChatResponseLabel"
                                       FontSize="10"
                                       Foreground="{StaticResource BrushAccent}"
                                       Margin="2,5,2,0"
                                       TextWrapping="Wrap"
                                       Visibility="Collapsed"/>
                        </StackPanel>
                    </Border>
                </Grid>
            </Border>
        </Grid>
    </Grid>
</Window>
